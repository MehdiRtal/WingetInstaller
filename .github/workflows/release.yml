name: Release

on:
  push:
    tags: v*

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Wait for Build
      uses: lewagon/wait-on-check-action@latest
      with:
          ref: ${{ github.ref }}
          check-name: build
          repo-token: ${{ github.token }}
    - name: Push Release
      uses: marvinpinto/action-automatic-releases@latest
      with:
        repo_token: ${{ github.token }}
        prerelease: false
        files: dist/windows
